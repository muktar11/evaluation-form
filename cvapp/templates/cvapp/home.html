{% extends 'cvapp/base.html' %}
{% block content %}

<h2 class="mb-3">๐ ุขุฎุฑ ุงูููุงุฐุฌ ุงููุฑุณูุฉ</h2>

<div class="table-responsive">
  <table class="table table-bordered table-hover align-middle">
    <thead class="table-primary text-center">
      <tr>
        <th>ุงูุงุณู</th>
        <th>ุงููุงุชู</th>
        <th>ุฑูู ุงูุชุฑุดูุญ</th>
        <th>ุงูุนูุฑ</th>
        <th>ุงูุญุงูุฉ</th>
        <th>ุงูุฅุฌุฑุงุก</th>
      </tr>
    </thead>
    <tbody>
      {% for s in submissions %}
      {% if s.pk %}
      <tr>
        <td>{{ s.ุงูุงุณู|default:"โ" }}</td>
        <td>{{ s.ูุงุชู_ุงูุญุงุฌุฒ|default:"โ" }}</td>
        <td>{{ s.ุฑูู_ุงูุชุฑุดูุญ|default:"โ" }}</td>
        <td>{{ s.ุงูุนูุฑ|default:"โ" }}</td>
        <td class="text-center">
          {% if s.ุชู_ุงูุญุฌุฒ %}
          <span class="badge bg-success">ุชู ุงูุญุฌุฒ</span><br>
          <small>{{ s.ุงุณู_ุงูุญุงุฌุฒ }}</small>
          {% else %}
          <span class="badge bg-secondary">ูุชุงุญ</span>
          {% endif %}
        </td>
        <td class="text-center">
          <a href="{% url 'cvapp:submission_detail' s.pk %}" class="btn btn-sm btn-primary">ุนุฑุถ ุงูุชูุงุตูู</a>
        </td>
      </tr>
      {% endif %}
      {% empty %}
      <tr>
        <td colspan="6" class="text-center text-muted">ูุง ุชูุฌุฏ ููุงุฐุฌ ุจุนุฏ.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<!-- ุฅุดุนุงุฑุงุช -->
<div class="modal fade" id="notificationModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">๐ข ุฅุดุนุงุฑุงุช ุงูุญุฌุฒ</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        {% if notifications %}
        <ul class="list-group">
          {% for n in notifications %}
          <li class="list-group-item">
            <strong>{{ n.ุงููุฑุดุญุฉ.ุงูุงุณู }}</strong> ุชู ุญุฌุฒู ุจูุงุณุทุฉ <strong>{{ n.ุงุณู_ุงูุญุงุฌุฒ }}</strong>
            (<span class="text-muted">{{ n.ูุงุชู_ุงูุญุงุฌุฒ }}</span>)<br>
            <small class="text-muted">๐ {{ n.ุชุงุฑูุฎ_ุงูุฅูุดุงุก|date:"Y-m-d H:i" }}</small>
          </li>
          {% endfor %}
        </ul>
        <nav class="mt-3">
          <ul class="pagination justify-content-center">
            {% if notifications.has_previous %}
            <li class="page-item"><a class="page-link" href="?page={{ notifications.previous_page_number }}">ุงูุณุงุจู</a></li>
            {% endif %}
            <li class="page-item disabled"><span class="page-link">ุตูุญุฉ {{ notifications.number }} ูู {{ notifications.paginator.num_pages }}</span></li>
            {% if notifications.has_next %}
            <li class="page-item"><a class="page-link" href="?page={{ notifications.next_page_number }}">ุงูุชุงูู</a></li>
            {% endif %}
          </ul>
        </nav>
        {% else %}
        <div class="alert alert-info">ูุง ุชูุฌุฏ ุญุฌูุฒุงุช ุจุนุฏ.</div>
        {% endif %}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ุฅุบูุงู</button>
      </div>
    </div>
  </div>
</div>

{% endblock %}
